{
 "add_total_row": 0,
 "columns": [],
 "creation": "2024-12-12 15:18:52.028244",
 "disabled": 0,
 "docstatus": 0,
 "doctype": "Report",
 "filters": [],
 "idx": 0,
 "is_standard": "Yes",
 "json": "{}",
 "letterhead": null,
 "modified": "2024-12-12 15:29:00.025880",
 "modified_by": "Administrator",
 "module": "Property Management Solution",
 "name": "Target",
 "owner": "Administrator",
 "prepared_report": 0,
 "ref_doctype": "Target",
 "report_name": "Target",
 "report_script": "import frappe\nfrom frappe import _\n\ndef execute(filters=None):\n  if not filters: \n    filters = {}\n\n  # Get the current month\n  current_month = frappe.utils.datetime.now_datetime().strftime(\"%m\") \n\n  # Fetch target for the current month\n  target = frappe.db.get_value(\n      \"Your Target DocType\",  # Replace with your actual doctype name\n      {\"name\": f\"{current_month}-Target\"}, \n      \"target\"\n  ) or 0\n\n  # Calculate total reservations and done deals for the current month\n  reservations, done_deals = 0, 0\n  records = frappe.get_all(\n      \"Your Target DocType\",  # Replace with your actual doctype name\n      filters={\"MONTH(creation)\": current_month},  # Filter by current month\n      fields=[\"reservations\", \"done_deal\"] \n  )\n  for record in records:\n    reservations += record.reservations\n    done_deals += record.done_deal\n\n  # Prepare chart data\n  data = [\n      {\n          \"name\": _(\"Target\"),\n          \"value\": target\n      },\n      {\n          \"name\": _(\"Reservations\"),\n          \"value\": reservations\n      },\n      {\n          \"name\": _(\"Done Deals\"),\n          \"value\": done_deals\n      }\n  ]\n\n  # Define chart columns\n  columns = [\n      {\n          \"fieldname\": \"name\",\n          \"label\": _(\"Type\"),\n          \"fieldtype\": \"Data\"\n      },\n      {\n          \"fieldname\": \"value\",\n          \"label\": _(\"Value\"),\n          \"fieldtype\": \"Int\" \n      }\n  ]\n\n  return columns, data",
 "report_type": "Report Builder",
 "roles": [],
 "timeout": 0
}